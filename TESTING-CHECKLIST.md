# 功能测试清单 | Testing Checklist

**版本 Version**: 1.0.0
**更新日期 Last Updated**: 2026-02-02

---

## 📋 测试环境要求 | Test Environment Requirements

- [ ] Docker Desktop 已启动
- [ ] 数据库已运行（PostgreSQL）
- [ ] Redis已运行
- [ ] API服务器已启动（端口3000）
- [ ] Web前端已启动（端口5173）
- [ ] 已运行数据库seed（`npm run seed`）
- [ ] 防火墙已配置（`setup-firewall.bat`）

---

## 1️⃣ 认证与授权模块 | Authentication & Authorization

### 1.1 用户登录 | User Login
- [ ] **测试账号**: admin@luna.top / DevTest2026!@#$
- [ ] **步骤**:
  1. 访问 http://192.168.71.21:5173
  2. 点击"登录"按钮
  3. 输入邮箱和密码
  4. 点击"登录"
- [ ] **预期结果**: 成功登录，跳转到仪表板
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 1.2 错误密码登录 | Wrong Password
- [ ] **测试账号**: admin@luna.top / WrongPassword
- [ ] **预期结果**: 显示"Invalid credentials"错误
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 1.3 用户注册 | User Registration
- [ ] **步骤**:
  1. 点击"注册"
  2. 填写邮箱、姓名、密码
  3. 提交表单
- [ ] **预期结果**: 成功创建账号
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 1.4 用户登出 | User Logout
- [ ] **步骤**: 点击"退出登录"
- [ ] **预期结果**: 返回登录页面
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 1.5 权限控制 | Permission Control
- [ ] **测试**: 客户用户无法访问管理员功能
- [ ] **预期结果**: 显示权限不足
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 2️⃣ 设备护照模块 | Device Passport Module

### 2.1 创建设备护照 | Create Device Passport
- [ ] **测试账号**: operator@luna.top
- [ ] **步骤**:
  1. 导航到"设备管理"
  2. 点击"创建设备护照"
  3. 填写设备信息：
     - 产品线: PF (Packaging)
     - 设备名称: Test Device
     - 型号: TD-001
     - 制造商: Test Manufacturer
  4. 提交表单
- [ ] **预期结果**: 成功创建，生成护照代码（格式：DP-MED-2601-PF-CN-XXXXXX-XX）
- [ ] **实际结果**: _______________
- [ ] **护照代码**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 2.2 查看设备列表 | View Device List
- [ ] **步骤**: 导航到"设备列表"
- [ ] **预期结果**: 显示所有设备，包含筛选和搜索功能
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 2.3 查看设备详情 | View Device Details
- [ ] **步骤**: 点击设备进入详情页
- [ ] **预期结果**: 显示完整设备信息、二维码、生命周期事件
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 2.4 更新设备状态 | Update Device Status
- [ ] **测试账号**: qc@luna.top
- [ ] **步骤**:
  1. 打开设备详情
  2. 点击"更新状态"
  3. 选择新状态（如：IN_QC → QC_PASSED）
  4. 提交
- [ ] **预期结果**: 状态成功更新，记录生命周期事件
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 2.5 扫描设备二维码 | Scan Device QR Code
- [ ] **步骤**:
  1. 打开设备详情页面
  2. 使用手机扫描二维码
  3. 或访问公开扫描URL
- [ ] **预期结果**: 显示设备公开信息（无需登录）
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 2.6 导出设备数据 | Export Device Data
- [ ] **步骤**: 点击"导出"按钮，选择Excel格式
- [ ] **预期结果**: 下载包含设备数据的Excel文件
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 3️⃣ 服务请求模块 | Service Request Module

### 3.1 创建服务请求 | Create Service Request
- [ ] **测试账号**: customer@luna.top
- [ ] **步骤**:
  1. 导航到"服务请求"
  2. 点击"创建请求"
  3. 填写信息：
     - 标题: 设备维修请求
     - 服务类型: REPAIR
     - 描述: 设备需要维修
     - 预算: 1000-2000 USD
  4. 提交
- [ ] **预期结果**: 成功创建，生成请求代码（SR-YYMM-NNNNNN）
- [ ] **实际结果**: _______________
- [ ] **请求代码**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 3.2 发布服务请求 | Publish Service Request
- [ ] **步骤**: 将草稿状态的请求发布
- [ ] **预期结果**: 状态变为PUBLISHED，专家可见
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 3.3 专家浏览服务请求 | Expert Browse Requests
- [ ] **测试账号**: expert@luna.top
- [ ] **步骤**: 导航到"服务市场"
- [ ] **预期结果**: 显示所有公开的服务请求
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 3.4 专家申请服务 | Expert Apply for Service
- [ ] **测试账号**: expert@luna.top
- [ ] **步骤**:
  1. 选择一个服务请求
  2. 点击"申请"
  3. 填写申请信息：
     - 报价: 1500 USD
     - 预计工期: 3天
     - 申请说明: 我有相关经验
  4. 提交
- [ ] **预期结果**: 成功提交申请
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 3.5 客户接受申请 | Customer Accept Application
- [ ] **测试账号**: customer@luna.top
- [ ] **步骤**:
  1. 查看服务请求的申请列表
  2. 选择一个申请
  3. 点击"接受"
- [ ] **预期结果**:
  - 申请状态变为ACCEPTED
  - 请求状态变为IN_PROGRESS
  - 拒绝其他申请
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 3.6 完成服务 | Complete Service
- [ ] **步骤**: 将服务标记为完成
- [ ] **预期结果**: 状态变为COMPLETED，记录完成时间
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 4️⃣ 专家管理模块 | Expert Management Module

### 4.1 注册专家账号 | Register as Expert
- [ ] **步骤**:
  1. 注册新账号
  2. 完善专家资料
  3. 提交审核
- [ ] **预期结果**: 提交成功，等待管理员审核
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 4.2 管理员审核专家 | Admin Review Expert
- [ ] **测试账号**: admin@luna.top
- [ ] **步骤**:
  1. 导航到"专家管理"
  2. 查看待审核专家
  3. 批准或拒绝
- [ ] **预期结果**: 状态更新，专家收到通知
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 4.3 专家更新资料 | Expert Update Profile
- [ ] **测试账号**: expert@luna.top
- [ ] **步骤**:
  1. 导航到"个人资料"
  2. 更新信息（技能、经验、证书等）
  3. 保存
- [ ] **预期结果**: 资料成功更新
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 4.4 查看专家列表 | View Expert List
- [ ] **步骤**: 浏览专家目录
- [ ] **预期结果**: 显示已认证的专家，支持筛选和搜索
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 5️⃣ 文件上传模块 | File Upload Module

### 5.1 上传图片 | Upload Image
- [ ] **步骤**:
  1. 在任何支持上传的页面
  2. 选择图片文件（JPG/PNG）
  3. 上传
- [ ] **预期结果**: 成功上传，返回文件URL
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 5.2 上传文档 | Upload Document
- [ ] **步骤**: 上传PDF或Word文档
- [ ] **预期结果**: 成功上传
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 5.3 文件大小限制 | File Size Limit
- [ ] **步骤**: 尝试上传>10MB的文件
- [ ] **预期结果**: 显示"文件过大"错误
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 5.4 文件类型限制 | File Type Restriction
- [ ] **步骤**: 尝试上传不支持的文件类型（如.exe）
- [ ] **预期结果**: 显示"不支持的文件类型"错误
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 6️⃣ 通知系统 | Notification System

### 6.1 WebSocket连接 | WebSocket Connection
- [ ] **步骤**: 登录后检查WebSocket连接
- [ ] **预期结果**: 浏览器控制台显示"Successfully connected to notification service"
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 6.2 实时通知 | Real-time Notification
- [ ] **步骤**:
  1. 用户A创建服务请求
  2. 用户B（专家）申请服务
  3. 用户A应该收到实时通知
- [ ] **预期结果**: 实时显示新通知
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 6.3 标记通知已读 | Mark Notification as Read
- [ ] **步骤**: 点击通知，标记为已读
- [ ] **预期结果**: 通知状态更新
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 7️⃣ 数据分析模块 | Analytics Module

### 7.1 仪表板统计 | Dashboard Statistics
- [ ] **测试账号**: admin@luna.top
- [ ] **步骤**: 访问仪表板
- [ ] **预期结果**: 显示：
  - 设备总数
  - 活跃设备数
  - 服务请求统计
  - 专家统计
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 7.2 设备状态分布图 | Device Status Chart
- [ ] **预期结果**: 显示饼图或柱状图
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 7.3 数据导出 | Data Export
- [ ] **步骤**: 导出统计报表
- [ ] **预期结果**: 下载Excel文件
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 8️⃣ 地图功能 | Map Features

### 8.1 地图显示 | Map Display
- [ ] **步骤**: 访问地图页面
- [ ] **预期结果**: 显示设备位置标记
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 8.2 位置搜索 | Location Search
- [ ] **步骤**: 搜索特定位置
- [ ] **预期结果**: 地图定位到该位置
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 8.3 设备定位 | Device Geolocation
- [ ] **步骤**: 为设备设置地理位置
- [ ] **预期结果**: 位置保存成功，地图上显示
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 9️⃣ API文档测试 | API Documentation

### 9.1 访问Swagger文档 | Access Swagger Docs
- [ ] **URL**: http://192.168.71.21:3000/api/docs
- [ ] **预期结果**: 显示完整的API文档
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 9.2 测试API端点 | Test API Endpoint
- [ ] **步骤**: 在Swagger中测试登录API
- [ ] **预期结果**: 返回JWT token
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 🔟 移动端测试 | Mobile Testing

### 10.1 手机浏览器访问 | Mobile Browser Access
- [ ] **设备**: iPhone / Android
- [ ] **URL**: http://192.168.71.21:5173
- [ ] **预期结果**: 页面自适应，功能正常
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 10.2 响应式布局 | Responsive Layout
- [ ] **测试**: 调整浏览器窗口大小
- [ ] **预期结果**: 布局自动适应
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 10.3 触摸操作 | Touch Operations
- [ ] **测试**: 在移动设备上进行点击、滑动操作
- [ ] **预期结果**: 操作流畅，无卡顿
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 1️⃣1️⃣ 性能测试 | Performance Testing

### 11.1 页面加载速度 | Page Load Speed
- [ ] **测试**: 打开主页并测量加载时间
- [ ] **预期结果**: < 2秒
- [ ] **实际结果**: ________ 秒
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 11.2 并发用户 | Concurrent Users
- [ ] **测试**: 多个用户同时登录和操作
- [ ] **预期结果**: 系统稳定，无卡顿
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 11.3 数据库查询性能 | Database Query Performance
- [ ] **测试**: 查询大量设备数据
- [ ] **预期结果**: 响应时间 < 1秒
- [ ] **实际结果**: ________ 秒
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 1️⃣2️⃣ 安全测试 | Security Testing

### 12.1 SQL注入防护 | SQL Injection Protection
- [ ] **测试**: 在输入框输入SQL注入代码
- [ ] **预期结果**: 系统拒绝或转义输入
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 12.2 XSS防护 | XSS Protection
- [ ] **测试**: 输入JavaScript脚本
- [ ] **预期结果**: 脚本不执行
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 12.3 CSRF防护 | CSRF Protection
- [ ] **测试**: 检查API请求是否有CSRF token
- [ ] **预期结果**: 使用JWT认证，自动防护
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

### 12.4 速率限制 | Rate Limiting
- [ ] **测试**: 短时间内多次请求同一API
- [ ] **预期结果**: 触发速率限制，返回429错误
- [ ] **实际结果**: _______________
- [ ] **状态**: ✅ 通过 / ❌ 失败

---

## 📊 测试总结 | Test Summary

### 统计 | Statistics
- **总测试项 Total Tests**: _____ / 80
- **通过 Passed**: _____
- **失败 Failed**: _____
- **跳过 Skipped**: _____
- **通过率 Pass Rate**: _____%

### 严重问题 | Critical Issues
1. _______________
2. _______________
3. _______________

### 一般问题 | General Issues
1. _______________
2. _______________
3. _______________

### 建议 | Recommendations
1. _______________
2. _______________
3. _______________

---

## 📝 测试签字 | Test Sign-off

- **测试人员 Tester**: _______________
- **测试日期 Test Date**: _______________
- **测试环境 Environment**: _______________
- **版本号 Version**: 1.0.0

---

**最后更新 Last Updated**: 2026-02-02
