# LUNA Bitcoin (NB) åŒºå—é“¾ç§¯åˆ†ä»£å¸ç³»ç»Ÿå®æ–½æ–¹æ¡ˆ

## é¡¹ç›®æ¦‚è¿°

**å…¬å¸åç§°ï¼š** LUNA INDUSTRY
**ä»£å¸åç§°ï¼š** LUNA Bitcoin
**ä»£å¸ç®€ç§°ï¼š** NB
**ç³»ç»Ÿå®šä½ï¼š** åŸºäºåŒºå—é“¾çš„è®¾å¤‡æŠ¤ç…§ç§¯åˆ†ä»£å¸ç³»ç»Ÿ
**æ ¸å¿ƒä»·å€¼ï¼š** ä¸å¯ç¯¡æ”¹çš„è®¾å¤‡å±¥å†ã€ä¸“å®¶èµ„å†è®¤è¯ã€ç§¯åˆ†æ¿€åŠ±ç”Ÿæ€

---

## ä¸€ã€ä»£å¸ç»æµæ¨¡å‹

### 1.1 ä»£å¸åŸºæœ¬ä¿¡æ¯

```
ä»£å¸åç§°ï¼šLUNA Bitcoin
ä»£å¸ç¬¦å·ï¼šNB
ä»£å¸ç±»å‹ï¼šERC-20 / BEP-20ï¼ˆå¯é€‰ï¼‰
æ€»ä¾›åº”é‡ï¼š1,000,000,000 NB (10äº¿)
æœ€å°å•ä½ï¼š0.0001 NB
åŒºå—é“¾ï¼šä»¥å¤ªåŠ / BSC / Polygonï¼ˆå»ºè®®Polygon - ä½gasè´¹ï¼‰
```

### 1.2 ä»£å¸åˆ†é…æ–¹æ¡ˆ

| åˆ†é…ç±»å‹ | æ•°é‡ (NB) | ç™¾åˆ†æ¯” | ç”¨é€” |
|---------|-----------|--------|------|
| ç”Ÿæ€æ¿€åŠ±æ±  | 400,000,000 | 40% | ç”¨æˆ·æ¿€åŠ±ã€ä¸“å®¶å¥–åŠ±ã€è®¾å¤‡è®¤è¯ |
| å…¬å¸å‚¨å¤‡ | 200,000,000 | 20% | è¿è¥ã€å¸‚åœºæ¨å¹¿ã€æˆ˜ç•¥åˆä½œ |
| å›¢é˜Ÿé”ä»“ | 150,000,000 | 15% | å›¢é˜Ÿæ¿€åŠ±ï¼ˆ4å¹´çº¿æ€§é‡Šæ”¾ï¼‰|
| æ—©æœŸæŠ•èµ„è€… | 100,000,000 | 10% | ç§å­è½®/å¤©ä½¿è½®ï¼ˆ2å¹´é”ä»“ï¼‰|
| ç¤¾åŒºæ²»ç† | 100,000,000 | 10% | DAOæ²»ç†ã€ç¤¾åŒºå»ºè®¾ |
| æµåŠ¨æ€§æ±  | 50,000,000 | 5% | DEXæµåŠ¨æ€§æä¾› |

### 1.3 ä»£å¸é‡Šæ”¾è®¡åˆ’

```
Year 1: 25% é‡Šæ”¾ (250,000,000 NB)
Year 2: 25% é‡Šæ”¾ (250,000,000 NB)
Year 3: 25% é‡Šæ”¾ (250,000,000 NB)
Year 4: 25% é‡Šæ”¾ (250,000,000 NB)

ç”Ÿæ€æ¿€åŠ±æ± ï¼šæŒ‰éœ€é‡Šæ”¾ï¼Œæ™ºèƒ½åˆçº¦è‡ªåŠ¨åˆ†å‘
å›¢é˜Ÿé”ä»“ï¼šçº¿æ€§é‡Šæ”¾ï¼Œ4å¹´vestæœŸ
```

---

## äºŒã€ç§¯åˆ†è·å–è§„åˆ™

### 2.1 ç”¨æˆ·è¡Œä¸ºæ¿€åŠ±

#### è®¾å¤‡ç›¸å…³è¡Œä¸º

| è¡Œä¸º | å¥–åŠ± (NB) | è¯´æ˜ |
|------|----------|------|
| æ³¨å†Œè®¾å¤‡æŠ¤ç…§ | 100 | é¦–æ¬¡æ³¨å†Œè®¾å¤‡ |
| ä¸Šä¼ è®¾å¤‡ç…§ç‰‡ | 10 | æ¯å¼ ç…§ç‰‡ï¼ˆæœ€å¤š5å¼ /è®¾å¤‡ï¼‰|
| å®Œæ•´è®¾å¤‡ä¿¡æ¯ | 50 | å¡«å†™å®Œæ•´è®¾å¤‡å‚æ•° |
| å®šæœŸç»´æŠ¤è®°å½• | 20 | æ¯æ¬¡ç»´æŠ¤è®°å½•ä¸Šä¼  |
| è®¾å¤‡çŠ¶æ€æ›´æ–° | 5 | æ¯æ¬¡çŠ¶æ€å˜æ›´ |
| è®¾å¤‡äºŒç»´ç æ‰«æ | 2 | æ¯æ¬¡æ‰«æï¼ˆé™æ¯æ—¥1æ¬¡/è®¾å¤‡ï¼‰|
| è®¾å¤‡è½¬è®©/äº¤æ˜“ | 30 | å®Œæˆè®¾å¤‡æ‰€æœ‰æƒè½¬ç§» |

#### æœåŠ¡ç›¸å…³è¡Œä¸º

| è¡Œä¸º | å¥–åŠ± (NB) | è¯´æ˜ |
|------|----------|------|
| å‘èµ·æœåŠ¡è¯·æ±‚ | 10 | æäº¤æœåŠ¡ç”³è¯· |
| å®ŒæˆæœåŠ¡è®¢å• | 200-1000 | æ ¹æ®è®¢å•é‡‘é¢0.5%è¿”NB |
| æœåŠ¡å¥½è¯„ | 20 | ç»™äºˆæœåŠ¡å¥½è¯„ |
| è¢«è¯„ä¸ºä¼˜è´¨æœåŠ¡ | 100 | è·å¾—5æ˜Ÿå¥½è¯„ |
| åŠæ—¶å“åº”æœåŠ¡ | 50 | 2å°æ—¶å†…å“åº” |

#### ä¸“å®¶è¡Œä¸ºæ¿€åŠ±

| è¡Œä¸º | å¥–åŠ± (NB) | è¯´æ˜ |
|------|----------|------|
| ä¸“å®¶è®¤è¯é€šè¿‡ | 500 | é¦–æ¬¡é€šè¿‡ä¸“å®¶è®¤è¯ |
| ä¸Šä¼ èµ„è´¨è¯ä¹¦ | 50 | æ¯ä¸ªæœ‰æ•ˆè¯ä¹¦ |
| å®ŒæˆåŸ¹è®­è¯¾ç¨‹ | 100 | å®Œæˆå®˜æ–¹åŸ¹è®­ |
| å‘å¸ƒæŠ€æœ¯æ–‡ç«  | 80 | æ¯ç¯‡åŸåˆ›æ–‡ç«  |
| åœ¨çº¿ç­”ç–‘ | 10 | æ¯æ¬¡æœ‰æ•ˆç­”ç–‘ |
| æœˆåº¦ä¼˜ç§€ä¸“å®¶ | 1000 | æœˆåº¦è¯„é€‰å¥–åŠ± |

#### ç¤¾åŒºè´¡çŒ®

| è¡Œä¸º | å¥–åŠ± (NB) | è¯´æ˜ |
|------|----------|------|
| é‚€è¯·æ–°ç”¨æˆ· | 150 | æ¯ä¸ªæœ‰æ•ˆé‚€è¯· |
| è¢«é‚€è¯·ç”¨æˆ·å®Œæˆé¦–å• | 300 | äºŒçº§å¥–åŠ± |
| å‘ç°ç³»ç»Ÿbug | 100-500 | æ ¹æ®ä¸¥é‡ç¨‹åº¦ |
| æäº¤æ”¹è¿›å»ºè®® | 50-200 | è¢«é‡‡çº³çš„å»ºè®® |
| å‚ä¸ç¤¾åŒºæ²»ç†æŠ•ç¥¨ | 5 | æ¯æ¬¡æŠ•ç¥¨ |

### 2.2 æ¶ˆè€—æœºåˆ¶ï¼ˆé€šç¼©è®¾è®¡ï¼‰

| æ¶ˆè€—åœºæ™¯ | æˆæœ¬ (NB) | è¯´æ˜ |
|---------|----------|------|
| é«˜çº§è®¤è¯ç”³è¯· | 1000 | ä¸“å®¶é«˜çº§è®¤è¯ |
| ä¼˜å…ˆæœåŠ¡ç‰¹æƒ | 200 | ä¼˜å…ˆåŒ¹é…ä¸“å®¶ |
| æ•°æ®å¯¼å‡ºæœåŠ¡ | 50 | å¯¼å‡ºè®¾å¤‡å®Œæ•´å±¥å† |
| ç½®é¡¶æœåŠ¡å¹¿å‘Š | 500/å¤© | æœåŠ¡å¤§å…ç½®é¡¶ |
| è§£é”é«˜çº§åŠŸèƒ½ | 1000/æœˆ | VIPä¼šå‘˜ç‰¹æƒ |
| è®¾å¤‡NFTé“¸é€  | 2000 | è®¾å¤‡æ•°å­—èµ„äº§åŒ– |
| æ•°æ®å­˜å‚¨è´¹ | 10/GB/å¹´ | å¤§æ–‡ä»¶å­˜å‚¨ |

### 2.3 è´¨æŠ¼å¥–åŠ±

```
è´¨æŠ¼æœŸé™      å¹´åŒ–æ”¶ç›Šç‡     æœ€ä½è´¨æŠ¼
30å¤©          3%            1,000 NB
90å¤©          5%            5,000 NB
180å¤©         8%            10,000 NB
365å¤©         12%           50,000 NB

æµåŠ¨æ€§æŒ–çŸ¿    20%           æ— æœ€ä½é™åˆ¶
```

---

## ä¸‰ã€åŒºå—é“¾æŠ€æœ¯æ¶æ„

### 3.1 æŠ€æœ¯é€‰å‹

#### ä¸»é“¾é€‰æ‹©ï¼šPolygon (Matic)

**ç†ç”±ï¼š**
- âœ… ä½Gasè´¹ï¼ˆäº¤æ˜“æˆæœ¬ < $0.01ï¼‰
- âœ… é«˜TPSï¼ˆ7000+ TPSï¼‰
- âœ… EVMå…¼å®¹ï¼ˆä»¥å¤ªåŠå·¥å…·é“¾å¯ç”¨ï¼‰
- âœ… æˆç†Ÿçš„ç”Ÿæ€ç³»ç»Ÿ
- âœ… è‰¯å¥½çš„å¼€å‘è€…æ”¯æŒ
- âœ… ä¼ä¸šçº§åº”ç”¨æ¡ˆä¾‹å¤š

**å¤‡é€‰æ–¹æ¡ˆï¼š**
1. **ä»¥å¤ªåŠL2ï¼ˆArbitrum/Optimismï¼‰** - æ›´å»ä¸­å¿ƒåŒ–ä½†æˆæœ¬ç¨é«˜
2. **BSC** - æˆæœ¬ä½ä½†å»ä¸­å¿ƒåŒ–ç¨‹åº¦è¾ƒä½
3. **ç§é“¾/è”ç›Ÿé“¾ï¼ˆHyperledger Fabricï¼‰** - å®Œå…¨å¯æ§ä½†ç¼ºä¹ä»£å¸æµé€šæ€§

### 3.2 æ™ºèƒ½åˆçº¦æ¶æ„

```
contracts/
â”œâ”€â”€ token/
â”‚   â”œâ”€â”€ NBToken.sol                 # ERC-20ä»£å¸ä¸»åˆçº¦
â”‚   â”œâ”€â”€ NBTokenVesting.sol          # ä»£å¸é‡Šæ”¾åˆçº¦
â”‚   â””â”€â”€ NBTokenStaking.sol          # è´¨æŠ¼æŒ–çŸ¿åˆçº¦
â”œâ”€â”€ passport/
â”‚   â”œâ”€â”€ DevicePassport.sol          # è®¾å¤‡æŠ¤ç…§NFT
â”‚   â”œâ”€â”€ DeviceRegistry.sol          # è®¾å¤‡æ³¨å†Œè¡¨
â”‚   â””â”€â”€ DeviceHistory.sol           # è®¾å¤‡å±¥å†è®°å½•
â”œâ”€â”€ expert/
â”‚   â”œâ”€â”€ ExpertCredential.sol        # ä¸“å®¶èµ„è´¨NFT
â”‚   â”œâ”€â”€ ExpertRegistry.sol          # ä¸“å®¶æ³¨å†Œè¡¨
â”‚   â””â”€â”€ ExpertReputation.sol        # ä¿¡èª‰è¯„åˆ†ç³»ç»Ÿ
â”œâ”€â”€ reward/
â”‚   â”œâ”€â”€ RewardDistributor.sol       # å¥–åŠ±åˆ†å‘å™¨
â”‚   â”œâ”€â”€ ActivityTracker.sol         # è¡Œä¸ºè¿½è¸ª
â”‚   â””â”€â”€ RewardCalculator.sol        # å¥–åŠ±è®¡ç®—å™¨
â”œâ”€â”€ governance/
â”‚   â”œâ”€â”€ NBGovernor.sol              # DAOæ²»ç†åˆçº¦
â”‚   â””â”€â”€ ProposalManager.sol         # ææ¡ˆç®¡ç†
â””â”€â”€ utils/
    â”œâ”€â”€ AccessControl.sol           # æƒé™æ§åˆ¶
    â””â”€â”€ PriceOracle.sol             # ä»·æ ¼é¢„è¨€æœº
```

### 3.3 æ ¸å¿ƒæ™ºèƒ½åˆçº¦è®¾è®¡

#### 3.3.1 NBToken.sol (ERC-20)

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import "@openzeppelin/contracts/access/AccessControl.sol";
import "@openzeppelin/contracts/security/Pausable.sol";

contract NBToken is ERC20, AccessControl, Pausable {
    bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");
    bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

    uint256 public constant MAX_SUPPLY = 1_000_000_000 * 10**18; // 10äº¿

    constructor() ERC20("LUNA Bitcoin", "NB") {
        _grantRole(DEFAULT_ADMIN_ROLE, msg.sender);
        _grantRole(MINTER_ROLE, msg.sender);
    }

    function mint(address to, uint256 amount) public onlyRole(MINTER_ROLE) {
        require(totalSupply() + amount <= MAX_SUPPLY, "Exceeds max supply");
        _mint(to, amount);
    }

    function burn(uint256 amount) public {
        _burn(msg.sender, amount);
    }

    function pause() public onlyRole(DEFAULT_ADMIN_ROLE) {
        _pause();
    }

    function unpause() public onlyRole(DEFAULT_ADMIN_ROLE) {
        _unpause();
    }
}
```

#### 3.3.2 DevicePassport.sol (ERC-721)

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
import "@openzeppelin/contracts/token/ERC721/extensions/ERC721URIStorage.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

contract DevicePassport is ERC721, ERC721URIStorage, Ownable {
    uint256 private _tokenIdCounter;

    struct DeviceInfo {
        string passportCode;      // DP-XXX-XXXX-XX-XX-XXXXXX-XX
        string deviceName;
        string manufacturer;
        uint256 manufactureDate;
        address currentOwner;
        uint256 registrationDate;
        bytes32 dataHash;         // IPFS hashçš„Keccak256
    }

    mapping(uint256 => DeviceInfo) public devices;
    mapping(string => uint256) public passportCodeToTokenId;
    mapping(uint256 => bytes32[]) public deviceHistory; // å±¥å†è®°å½•hash

    event DeviceRegistered(uint256 indexed tokenId, string passportCode, address owner);
    event DeviceTransferred(uint256 indexed tokenId, address from, address to);
    event HistoryAdded(uint256 indexed tokenId, bytes32 historyHash);

    constructor() ERC721("Device Passport NFT", "DPNFT") {}

    function registerDevice(
        string memory passportCode,
        string memory deviceName,
        string memory manufacturer,
        uint256 manufactureDate,
        string memory metadataURI,
        bytes32 dataHash
    ) public returns (uint256) {
        require(passportCodeToTokenId[passportCode] == 0, "Device already registered");

        uint256 tokenId = ++_tokenIdCounter;
        _safeMint(msg.sender, tokenId);
        _setTokenURI(tokenId, metadataURI);

        devices[tokenId] = DeviceInfo({
            passportCode: passportCode,
            deviceName: deviceName,
            manufacturer: manufacturer,
            manufactureDate: manufactureDate,
            currentOwner: msg.sender,
            registrationDate: block.timestamp,
            dataHash: dataHash
        });

        passportCodeToTokenId[passportCode] = tokenId;

        emit DeviceRegistered(tokenId, passportCode, msg.sender);
        return tokenId;
    }

    function addHistory(uint256 tokenId, bytes32 historyHash) public {
        require(_exists(tokenId), "Device does not exist");
        require(ownerOf(tokenId) == msg.sender, "Not device owner");

        deviceHistory[tokenId].push(historyHash);
        emit HistoryAdded(tokenId, historyHash);
    }

    function getDeviceHistory(uint256 tokenId) public view returns (bytes32[] memory) {
        return deviceHistory[tokenId];
    }

    function _beforeTokenTransfer(
        address from,
        address to,
        uint256 tokenId,
        uint256 batchSize
    ) internal override {
        super._beforeTokenTransfer(from, to, tokenId, batchSize);

        if (from != address(0) && to != address(0)) {
            devices[tokenId].currentOwner = to;
            emit DeviceTransferred(tokenId, from, to);
        }
    }

    function tokenURI(uint256 tokenId)
        public
        view
        override(ERC721, ERC721URIStorage)
        returns (string memory)
    {
        return super.tokenURI(tokenId);
    }

    function supportsInterface(bytes4 interfaceId)
        public
        view
        override(ERC721, ERC721URIStorage)
        returns (bool)
    {
        return super.supportsInterface(interfaceId);
    }
}
```

#### 3.3.3 ExpertCredential.sol

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
import "@openzeppelin/contracts/access/AccessControl.sol";

contract ExpertCredential is ERC721, AccessControl {
    bytes32 public constant ISSUER_ROLE = keccak256("ISSUER_ROLE");

    uint256 private _tokenIdCounter;

    struct Credential {
        string expertId;
        string expertName;
        string[] certifications;
        string[] specialties;
        uint256 issueDate;
        uint256 expiryDate;
        uint256 reputationScore;
        bytes32 dataHash;
        bool isValid;
    }

    mapping(uint256 => Credential) public credentials;
    mapping(string => uint256) public expertIdToTokenId;

    event CredentialIssued(uint256 indexed tokenId, string expertId, address expert);
    event CredentialRevoked(uint256 indexed tokenId, string reason);
    event ReputationUpdated(uint256 indexed tokenId, uint256 newScore);

    constructor() ERC721("Expert Credential NFT", "ECNFT") {
        _grantRole(DEFAULT_ADMIN_ROLE, msg.sender);
        _grantRole(ISSUER_ROLE, msg.sender);
    }

    function issueCredential(
        address expert,
        string memory expertId,
        string memory expertName,
        string[] memory certifications,
        string[] memory specialties,
        uint256 validityPeriod,
        bytes32 dataHash
    ) public onlyRole(ISSUER_ROLE) returns (uint256) {
        require(expertIdToTokenId[expertId] == 0, "Credential already exists");

        uint256 tokenId = ++_tokenIdCounter;
        _safeMint(expert, tokenId);

        credentials[tokenId] = Credential({
            expertId: expertId,
            expertName: expertName,
            certifications: certifications,
            specialties: specialties,
            issueDate: block.timestamp,
            expiryDate: block.timestamp + validityPeriod,
            reputationScore: 1000, // åˆå§‹ä¿¡èª‰åˆ†
            dataHash: dataHash,
            isValid: true
        });

        expertIdToTokenId[expertId] = tokenId;

        emit CredentialIssued(tokenId, expertId, expert);
        return tokenId;
    }

    function updateReputation(uint256 tokenId, uint256 newScore)
        public
        onlyRole(ISSUER_ROLE)
    {
        require(_exists(tokenId), "Credential does not exist");
        credentials[tokenId].reputationScore = newScore;
        emit ReputationUpdated(tokenId, newScore);
    }

    function revokeCredential(uint256 tokenId, string memory reason)
        public
        onlyRole(ISSUER_ROLE)
    {
        require(_exists(tokenId), "Credential does not exist");
        credentials[tokenId].isValid = false;
        emit CredentialRevoked(tokenId, reason);
    }

    function isCredentialValid(uint256 tokenId) public view returns (bool) {
        if (!_exists(tokenId)) return false;
        Credential memory cred = credentials[tokenId];
        return cred.isValid && block.timestamp < cred.expiryDate;
    }

    function supportsInterface(bytes4 interfaceId)
        public
        view
        override(ERC721, AccessControl)
        returns (bool)
    {
        return super.supportsInterface(interfaceId);
    }
}
```

---

## å››ã€æ•°æ®ä¸Šé“¾æ–¹æ¡ˆ

### 4.1 ä¸Šé“¾æ•°æ®ç±»å‹

#### æ ¸å¿ƒæ•°æ®ï¼ˆç›´æ¥ä¸Šé“¾ï¼‰

1. **è®¾å¤‡æŠ¤ç…§æ ¸å¿ƒä¿¡æ¯**
   - æŠ¤ç…§ç¼–ç ï¼ˆpassportCodeï¼‰
   - è®¾å¤‡å”¯ä¸€æ ‡è¯†
   - å½“å‰æ‰€æœ‰è€…åœ°å€
   - æ³¨å†Œæ—¶é—´æˆ³
   - æ•°æ®æŒ‡çº¹ï¼ˆHashï¼‰

2. **ä¸“å®¶èµ„è´¨æ ¸å¿ƒä¿¡æ¯**
   - ä¸“å®¶ID
   - è®¤è¯çº§åˆ«
   - è¯ä¹¦ç¼–å·
   - æœ‰æ•ˆæœŸ
   - ä¿¡èª‰è¯„åˆ†

3. **å…³é”®äº‹ä»¶è®°å½•**
   - æ‰€æœ‰æƒè½¬ç§»
   - çŠ¶æ€å˜æ›´
   - ç»´æŠ¤è®°å½•
   - è®¤è¯æ›´æ–°

#### è¯¦ç»†æ•°æ®ï¼ˆIPFS + Hashä¸Šé“¾ï¼‰

1. **è®¾å¤‡è¯¦ç»†ä¿¡æ¯**
   - å®Œæ•´è®¾å¤‡è§„æ ¼å‚æ•°
   - ç…§ç‰‡ã€æ–‡æ¡£
   - ç»´æŠ¤æ‰‹å†Œ
   - æµ‹è¯•æŠ¥å‘Š

2. **ä¸“å®¶è¯¦ç»†èµ„æ–™**
   - å®Œæ•´ç®€å†
   - è¯ä¹¦æ‰«æä»¶
   - å·¥ä½œæ¡ˆä¾‹
   - åŸ¹è®­è®°å½•

### 4.2 æ··åˆå­˜å‚¨æ¶æ„

```
åº”ç”¨å±‚æ•°æ®æµ:
1. ç”¨æˆ·æäº¤æ•°æ® â†’ PostgreSQL (å®æ—¶æŸ¥è¯¢)
2. å…³é”®æ•°æ® â†’ IPFS (åˆ†å¸ƒå¼å­˜å‚¨)
3. IPFS Hash â†’ Blockchain (ä¸å¯ç¯¡æ”¹è¯æ˜)
4. äº‹ä»¶è§¦å‘ â†’ Smart Contract (è‡ªåŠ¨æ‰§è¡Œ)
```

#### å­˜å‚¨å±‚è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL    â”‚ â† å®æ—¶æ•°æ®ã€æŸ¥è¯¢ã€ä¸šåŠ¡é€»è¾‘
â”‚  (ä¸»æ•°æ®åº“)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ†’ å…³é”®æ•°æ®å˜æ›´
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚   IPFS   â”‚ â† å®Œæ•´æ•°æ®æ–‡ä»¶ã€ç…§ç‰‡ã€æ–‡æ¡£
    â”‚ (å»ä¸­å¿ƒåŒ–) â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
         â””â†’ è¿”å› IPFS Hash (Qm...)
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Blockchain  â”‚ â† HashæŒ‡çº¹ã€å…³é”®äº‹ä»¶ã€NFT
    â”‚  (ä¸å¯ç¯¡æ”¹)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 ä¸Šé“¾è§¦å‘æ—¶æœº

| ä¸šåŠ¡äº‹ä»¶ | ä¸Šé“¾æ—¶æœº | ä¸Šé“¾å†…å®¹ |
|---------|---------|---------|
| è®¾å¤‡æ³¨å†Œ | ç«‹å³ | é“¸é€ NFT + åŸºæœ¬ä¿¡æ¯hash |
| è®¾å¤‡è½¬è®© | äº¤æ˜“ç¡®è®¤å | è½¬ç§»NFTæ‰€æœ‰æƒ |
| çŠ¶æ€å˜æ›´ | é‡è¦çŠ¶æ€å˜æ›´æ—¶ | æ·»åŠ å†å²è®°å½•hash |
| ç»´æŠ¤è®°å½• | ç»´æŠ¤å®Œæˆå | æ·»åŠ ç»´æŠ¤è®°å½•hash |
| ä¸“å®¶è®¤è¯ | å®¡æ ¸é€šè¿‡å | é“¸é€ è®¤è¯NFT |
| è¯ä¹¦æ›´æ–° | è¯ä¹¦ä¸Šä¼ å | æ›´æ–°å‡­è¯hash |
| ç§¯åˆ†å‘æ”¾ | æ‰¹é‡å¤„ç†ï¼ˆæ¯å°æ—¶ï¼‰| ç´¯è®¡å¥–åŠ±ä¸€æ¬¡æ€§å‘æ”¾ |
| è´¨æŠ¼æ“ä½œ | ç«‹å³ | é”å®šä»£å¸ |

---

## äº”ã€APIæ¥å£è®¾è®¡

### 5.1 åŒºå—é“¾äº¤äº’å±‚æ¥å£

#### åç«¯æœåŠ¡æ¶æ„

```typescript
apps/api/src/
â”œâ”€â”€ blockchain/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ web3.service.ts           # Web3è¿æ¥ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ contract.service.ts       # æ™ºèƒ½åˆçº¦äº¤äº’
â”‚   â”‚   â”œâ”€â”€ ipfs.service.ts           # IPFSæ–‡ä»¶ç®¡ç†
â”‚   â”‚   â””â”€â”€ wallet.service.ts         # é’±åŒ…ç®¡ç†
â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â”œâ”€â”€ nb-token.ts               # NBTokenåˆçº¦æ¥å£
â”‚   â”‚   â”œâ”€â”€ device-passport.ts        # è®¾å¤‡æŠ¤ç…§åˆçº¦
â”‚   â”‚   â””â”€â”€ expert-credential.ts      # ä¸“å®¶è®¤è¯åˆçº¦
â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”œâ”€â”€ mint-nft.dto.ts
â”‚   â”‚   â”œâ”€â”€ transfer-token.dto.ts
â”‚   â”‚   â””â”€â”€ upload-ipfs.dto.ts
â”‚   â””â”€â”€ blockchain.module.ts
```

#### æ ¸å¿ƒæ¥å£å®šä¹‰

```typescript
// apps/api/src/blockchain/services/device-passport-blockchain.service.ts

@Injectable()
export class DevicePassportBlockchainService {

  /**
   * å°†è®¾å¤‡æ³¨å†Œåˆ°åŒºå—é“¾
   */
  async registerDeviceOnChain(
    passportData: {
      passportCode: string;
      deviceName: string;
      manufacturer: string;
      manufactureDate: Date;
      metadata: any;
    },
    ownerAddress: string
  ): Promise<{
    tokenId: number;
    txHash: string;
    ipfsHash: string;
  }> {
    // 1. ä¸Šä¼ å®Œæ•´æ•°æ®åˆ°IPFS
    const ipfsHash = await this.ipfsService.uploadJSON({
      ...passportData,
      timestamp: new Date().toISOString(),
    });

    // 2. è®¡ç®—æ•°æ®æŒ‡çº¹
    const dataHash = ethers.utils.keccak256(
      ethers.utils.toUtf8Bytes(JSON.stringify(passportData))
    );

    // 3. è°ƒç”¨æ™ºèƒ½åˆçº¦
    const contract = this.getDevicePassportContract();
    const tx = await contract.registerDevice(
      passportData.passportCode,
      passportData.deviceName,
      passportData.manufacturer,
      Math.floor(passportData.manufactureDate.getTime() / 1000),
      `ipfs://${ipfsHash}`,
      dataHash
    );

    // 4. ç­‰å¾…äº¤æ˜“ç¡®è®¤
    const receipt = await tx.wait();
    const tokenId = receipt.events[0].args.tokenId.toNumber();

    return {
      tokenId,
      txHash: receipt.transactionHash,
      ipfsHash,
    };
  }

  /**
   * æ·»åŠ è®¾å¤‡å†å²è®°å½•åˆ°åŒºå—é“¾
   */
  async addDeviceHistory(
    tokenId: number,
    historyData: {
      eventType: string;
      description: string;
      timestamp: Date;
      operator: string;
      attachments?: string[];
    }
  ): Promise<string> {
    // 1. ä¸Šä¼ å†å²æ•°æ®åˆ°IPFS
    const ipfsHash = await this.ipfsService.uploadJSON(historyData);

    // 2. è®¡ç®—hash
    const historyHash = ethers.utils.keccak256(
      ethers.utils.toUtf8Bytes(ipfsHash)
    );

    // 3. æ·»åŠ åˆ°åˆçº¦
    const contract = this.getDevicePassportContract();
    const tx = await contract.addHistory(tokenId, historyHash);
    await tx.wait();

    return tx.hash;
  }

  /**
   * éªŒè¯è®¾å¤‡æ•°æ®å®Œæ•´æ€§
   */
  async verifyDeviceData(
    tokenId: number,
    localData: any
  ): Promise<boolean> {
    // 1. ä»åŒºå—é“¾è·å–æ•°æ®hash
    const contract = this.getDevicePassportContract();
    const deviceInfo = await contract.devices(tokenId);

    // 2. è®¡ç®—æœ¬åœ°æ•°æ®hash
    const localHash = ethers.utils.keccak256(
      ethers.utils.toUtf8Bytes(JSON.stringify(localData))
    );

    // 3. å¯¹æ¯”
    return deviceInfo.dataHash === localHash;
  }
}
```

### 5.2 REST APIç«¯ç‚¹

```typescript
// è®¾å¤‡æŠ¤ç…§åŒºå—é“¾æ“ä½œ
POST   /api/v1/blockchain/devices/register
POST   /api/v1/blockchain/devices/:id/history
GET    /api/v1/blockchain/devices/:id/verify
GET    /api/v1/blockchain/devices/:id/nft
POST   /api/v1/blockchain/devices/:id/transfer

// ä¸“å®¶è®¤è¯åŒºå—é“¾æ“ä½œ
POST   /api/v1/blockchain/experts/credential/issue
POST   /api/v1/blockchain/experts/credential/:id/update
GET    /api/v1/blockchain/experts/credential/:id/verify
POST   /api/v1/blockchain/experts/credential/:id/revoke

// NBä»£å¸æ“ä½œ
GET    /api/v1/blockchain/token/balance/:address
POST   /api/v1/blockchain/token/transfer
POST   /api/v1/blockchain/token/stake
POST   /api/v1/blockchain/token/unstake
GET    /api/v1/blockchain/token/rewards/:address

// IPFSæ“ä½œ
POST   /api/v1/blockchain/ipfs/upload
GET    /api/v1/blockchain/ipfs/:hash

// åŒºå—é“¾æŸ¥è¯¢
GET    /api/v1/blockchain/transaction/:txHash
GET    /api/v1/blockchain/gas-price
GET    /api/v1/blockchain/network-status
```

### 5.3 äº‹ä»¶ç›‘å¬å™¨

```typescript
// apps/api/src/blockchain/listeners/contract-event.listener.ts

@Injectable()
export class ContractEventListener implements OnModuleInit {

  async onModuleInit() {
    this.listenToDeviceEvents();
    this.listenToCredentialEvents();
    this.listenToTokenEvents();
  }

  private listenToDeviceEvents() {
    const contract = this.devicePassportContract;

    // ç›‘å¬è®¾å¤‡æ³¨å†Œäº‹ä»¶
    contract.on('DeviceRegistered', async (tokenId, passportCode, owner, event) => {
      await this.syncDeviceToDatabase({
        tokenId: tokenId.toNumber(),
        passportCode,
        owner,
        blockNumber: event.blockNumber,
        txHash: event.transactionHash,
      });
    });

    // ç›‘å¬è®¾å¤‡è½¬ç§»äº‹ä»¶
    contract.on('DeviceTransferred', async (tokenId, from, to, event) => {
      await this.updateDeviceOwnership({
        tokenId: tokenId.toNumber(),
        from,
        to,
        blockNumber: event.blockNumber,
        txHash: event.transactionHash,
      });
    });
  }

  private async syncDeviceToDatabase(data: any) {
    // åŒæ­¥åŒºå—é“¾æ•°æ®åˆ°PostgreSQL
    await this.devicePassportService.updateBlockchainInfo(data);
  }
}
```

---

## å…­ã€æ•°æ®æ¨¡å‹æ‰©å±•

### 6.1 æ•°æ®åº“Schemaæ‰©å±•

```sql
-- åŒºå—é“¾ä¿¡æ¯è¡¨
CREATE TABLE blockchain_records (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  entity_type VARCHAR(50) NOT NULL,        -- 'device', 'expert', 'transaction'
  entity_id UUID NOT NULL,                 -- å…³è”çš„ä¸šåŠ¡å®ä½“ID
  chain_id INT NOT NULL DEFAULT 137,       -- é“¾ID (137=Polygon)
  token_id BIGINT,                         -- NFT Token ID
  contract_address VARCHAR(42) NOT NULL,   -- åˆçº¦åœ°å€
  tx_hash VARCHAR(66) NOT NULL,            -- äº¤æ˜“hash
  block_number BIGINT NOT NULL,            -- åŒºå—å·
  ipfs_hash VARCHAR(100),                  -- IPFS hash
  data_hash VARCHAR(66),                   -- æ•°æ®æŒ‡çº¹
  status VARCHAR(20) DEFAULT 'confirmed',  -- pending, confirmed, failed
  gas_used BIGINT,                         -- Gasæ¶ˆè€—
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_blockchain_entity ON blockchain_records(entity_type, entity_id);
CREATE INDEX idx_blockchain_tx ON blockchain_records(tx_hash);
CREATE INDEX idx_blockchain_token ON blockchain_records(token_id);

-- NBä»£å¸è´¦æˆ·è¡¨
CREATE TABLE nb_token_accounts (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES users(id),
  wallet_address VARCHAR(42) NOT NULL UNIQUE,
  balance DECIMAL(20, 4) DEFAULT 0,           -- æ•°æ®åº“ä½™é¢ï¼ˆç¼“å­˜ï¼‰
  staked_balance DECIMAL(20, 4) DEFAULT 0,    -- è´¨æŠ¼é‡‘é¢
  locked_balance DECIMAL(20, 4) DEFAULT 0,    -- é”å®šé‡‘é¢
  total_earned DECIMAL(20, 4) DEFAULT 0,      -- ç´¯è®¡è·å¾—
  total_spent DECIMAL(20, 4) DEFAULT 0,       -- ç´¯è®¡æ¶ˆè´¹
  last_sync_block BIGINT,                     -- æœ€ååŒæ­¥çš„åŒºå—
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- NBäº¤æ˜“è®°å½•è¡¨
CREATE TABLE nb_transactions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  from_user_id UUID REFERENCES users(id),
  to_user_id UUID REFERENCES users(id),
  from_address VARCHAR(42),
  to_address VARCHAR(42) NOT NULL,
  amount DECIMAL(20, 4) NOT NULL,
  tx_type VARCHAR(50) NOT NULL,              -- reward, transfer, stake, purchase
  reason VARCHAR(200),                       -- äº¤æ˜“åŸå› 
  tx_hash VARCHAR(66),                       -- é“¾ä¸Šäº¤æ˜“hash
  status VARCHAR(20) DEFAULT 'pending',      -- pending, confirmed, failed
  metadata JSONB,                            -- é¢å¤–ä¿¡æ¯
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_nb_tx_user ON nb_transactions(from_user_id, to_user_id);
CREATE INDEX idx_nb_tx_hash ON nb_transactions(tx_hash);
CREATE INDEX idx_nb_tx_type ON nb_transactions(tx_type);

-- è®¾å¤‡æŠ¤ç…§æ·»åŠ åŒºå—é“¾å­—æ®µ
ALTER TABLE device_passports ADD COLUMN IF NOT EXISTS
  nft_token_id BIGINT,
  nft_contract_address VARCHAR(42),
  ipfs_hash VARCHAR(100),
  blockchain_verified BOOLEAN DEFAULT FALSE,
  last_chain_sync TIMESTAMP;

-- ä¸“å®¶æ·»åŠ åŒºå—é“¾å­—æ®µ
ALTER TABLE users ADD COLUMN IF NOT EXISTS
  credential_nft_token_id BIGINT,
  credential_contract_address VARCHAR(42),
  credential_ipfs_hash VARCHAR(100),
  wallet_address VARCHAR(42) UNIQUE;
```

### 6.2 äº‹ä»¶è¿½è¸ªè¡¨

```sql
-- é“¾ä¸Šäº‹ä»¶æ—¥å¿—
CREATE TABLE blockchain_events (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  event_name VARCHAR(100) NOT NULL,
  contract_address VARCHAR(42) NOT NULL,
  block_number BIGINT NOT NULL,
  tx_hash VARCHAR(66) NOT NULL,
  log_index INT NOT NULL,
  event_data JSONB NOT NULL,
  processed BOOLEAN DEFAULT FALSE,
  processed_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_blockchain_events_block ON blockchain_events(block_number);
CREATE INDEX idx_blockchain_events_processed ON blockchain_events(processed);
```

---

## ä¸ƒã€å‰ç«¯é›†æˆæ–¹æ¡ˆ

### 7.1 Web3é’±åŒ…é›†æˆ

```typescript
// apps/web/src/services/web3.service.ts

import { ethers } from 'ethers';
import { create } from 'zustand';

interface Web3Store {
  provider: ethers.providers.Web3Provider | null;
  signer: ethers.Signer | null;
  account: string | null;
  chainId: number | null;
  balance: string;
  nbBalance: string;
  connect: () => Promise<void>;
  disconnect: () => void;
  switchChain: (chainId: number) => Promise<void>;
}

export const useWeb3Store = create<Web3Store>((set, get) => ({
  provider: null,
  signer: null,
  account: null,
  chainId: null,
  balance: '0',
  nbBalance: '0',

  connect: async () => {
    if (typeof window.ethereum === 'undefined') {
      throw new Error('Please install MetaMask!');
    }

    const provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send('eth_requestAccounts', []);

    const signer = provider.getSigner();
    const account = await signer.getAddress();
    const network = await provider.getNetwork();
    const balance = await provider.getBalance(account);

    // è·å–NBä»£å¸ä½™é¢
    const nbTokenContract = new ethers.Contract(
      NB_TOKEN_ADDRESS,
      NB_TOKEN_ABI,
      provider
    );
    const nbBalance = await nbTokenContract.balanceOf(account);

    set({
      provider,
      signer,
      account,
      chainId: network.chainId,
      balance: ethers.utils.formatEther(balance),
      nbBalance: ethers.utils.formatEther(nbBalance),
    });

    // ç›‘å¬è´¦æˆ·å’Œç½‘ç»œå˜åŒ–
    window.ethereum.on('accountsChanged', (accounts: string[]) => {
      if (accounts.length === 0) {
        get().disconnect();
      } else {
        set({ account: accounts[0] });
      }
    });

    window.ethereum.on('chainChanged', () => {
      window.location.reload();
    });
  },

  disconnect: () => {
    set({
      provider: null,
      signer: null,
      account: null,
      chainId: null,
      balance: '0',
      nbBalance: '0',
    });
  },

  switchChain: async (chainId: number) => {
    if (!window.ethereum) return;

    try {
      await window.ethereum.request({
        method: 'wallet_switchEthereumChain',
        params: [{ chainId: `0x${chainId.toString(16)}` }],
      });
    } catch (error: any) {
      // Chain not added, add it
      if (error.code === 4902) {
        await window.ethereum.request({
          method: 'wallet_addEthereumChain',
          params: [CHAIN_CONFIGS[chainId]],
        });
      }
    }
  },
}));

const CHAIN_CONFIGS: Record<number, any> = {
  137: { // Polygon Mainnet
    chainId: '0x89',
    chainName: 'Polygon Mainnet',
    nativeCurrency: { name: 'MATIC', symbol: 'MATIC', decimals: 18 },
    rpcUrls: ['https://polygon-rpc.com/'],
    blockExplorerUrls: ['https://polygonscan.com/'],
  },
  80001: { // Mumbai Testnet
    chainId: '0x13881',
    chainName: 'Mumbai Testnet',
    nativeCurrency: { name: 'MATIC', symbol: 'MATIC', decimals: 18 },
    rpcUrls: ['https://rpc-mumbai.maticvigil.com/'],
    blockExplorerUrls: ['https://mumbai.polygonscan.com/'],
  },
};
```

### 7.2 UIç»„ä»¶

```typescript
// apps/web/src/components/blockchain/WalletConnect.tsx

export function WalletConnect() {
  const { account, connect, disconnect } = useWeb3Store();

  return (
    <div className="wallet-connect">
      {!account ? (
        <button onClick={connect} className="btn-primary">
          Connect Wallet
        </button>
      ) : (
        <div className="wallet-info">
          <span>{`${account.slice(0, 6)}...${account.slice(-4)}`}</span>
          <button onClick={disconnect} className="btn-secondary">
            Disconnect
          </button>
        </div>
      )}
    </div>
  );
}

// apps/web/src/components/blockchain/NBTokenBalance.tsx

export function NBTokenBalance() {
  const { nbBalance } = useWeb3Store();

  return (
    <div className="nb-balance">
      <img src="/nb-token-icon.png" alt="NB" />
      <span>{parseFloat(nbBalance).toLocaleString()} NB</span>
    </div>
  );
}

// apps/web/src/components/blockchain/DeviceNFTCard.tsx

export function DeviceNFTCard({ device }: { device: Device }) {
  const [nftData, setNftData] = useState(null);

  useEffect(() => {
    if (device.nftTokenId) {
      loadNFTData();
    }
  }, [device.nftTokenId]);

  const loadNFTData = async () => {
    // ä»IPFSåŠ è½½NFTå…ƒæ•°æ®
    const data = await fetchFromIPFS(device.ipfsHash);
    setNftData(data);
  };

  return (
    <div className="device-nft-card">
      <div className="nft-badge">ğŸ”— On-Chain</div>
      <h3>{device.deviceName}</h3>
      <p>Token ID: #{device.nftTokenId}</p>
      <a href={`https://opensea.io/assets/matic/${CONTRACT_ADDRESS}/${device.nftTokenId}`}
         target="_blank"
         className="btn-secondary">
        View on OpenSea
      </a>
    </div>
  );
}
```

---

## å…«ã€å®æ–½è·¯çº¿å›¾

### Phase 1: åŸºç¡€è®¾æ–½æ­å»º (2ä¸ªæœˆ)

**Week 1-2: æ™ºèƒ½åˆçº¦å¼€å‘**
- âœ… NBToken ERC-20åˆçº¦
- âœ… DevicePassport NFTåˆçº¦
- âœ… ExpertCredential NFTåˆçº¦
- âœ… æœ¬åœ°æµ‹è¯•ç½‘æµ‹è¯•

**Week 3-4: åç«¯é›†æˆ**
- âœ… Web3.js/Ethers.jsé›†æˆ
- âœ… IPFSèŠ‚ç‚¹æ­å»º
- âœ… æ•°æ®åº“Schemaæ‰©å±•
- âœ… APIæ¥å£å¼€å‘

**Week 5-6: å‰ç«¯é›†æˆ**
- âœ… MetaMaské’±åŒ…è¿æ¥
- âœ… ä»£å¸ä½™é¢æ˜¾ç¤º
- âœ… NFTé“¸é€ UI
- âœ… åŒºå—é“¾æµè§ˆå™¨é“¾æ¥

**Week 7-8: æµ‹è¯•ç½‘éƒ¨ç½²**
- âœ… Mumbaiæµ‹è¯•ç½‘éƒ¨ç½²
- âœ… æµ‹è¯•ä»£å¸åˆ†å‘
- âœ… ç«¯åˆ°ç«¯æµ‹è¯•
- âœ… å®‰å…¨å®¡è®¡å‡†å¤‡

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ä¸Šçº¿ (2ä¸ªæœˆ)

**Week 9-10: ä¸»ç½‘éƒ¨ç½²**
- âœ… åˆçº¦å®¡è®¡
- âœ… Polygonä¸»ç½‘éƒ¨ç½²
- âœ… æµåŠ¨æ€§æ± åˆ›å»º
- âœ… å¤šç­¾é’±åŒ…è®¾ç½®

**Week 11-12: è®¾å¤‡æŠ¤ç…§ä¸Šé“¾**
- âœ… è‡ªåŠ¨ä¸Šé“¾æµç¨‹
- âœ… IPFSå­˜å‚¨ä¼˜åŒ–
- âœ… æ‰¹é‡å¤„ç†
- âœ… Gasè´¹ä¼˜åŒ–

**Week 13-14: ä¸“å®¶è®¤è¯ä¸Šé“¾**
- âœ… NFTè®¤è¯å‘æ”¾
- âœ… ä¿¡èª‰ç³»ç»Ÿä¸Šé“¾
- âœ… è®¤è¯éªŒè¯æ¥å£
- âœ… ç§»åŠ¨ç«¯é€‚é…

**Week 15-16: ç§¯åˆ†ç³»ç»Ÿä¸Šçº¿**
- âœ… å¥–åŠ±è‡ªåŠ¨å‘æ”¾
- âœ… è´¨æŠ¼æŒ–çŸ¿åŠŸèƒ½
- âœ… å…‘æ¢å•†åŸ
- âœ… ç”¨æˆ·æ•™è‚²

### Phase 3: ç”Ÿæ€æ‹“å±• (æŒç»­)

**Month 5-6: é«˜çº§åŠŸèƒ½**
- DAOæ²»ç†ç³»ç»Ÿ
- æµåŠ¨æ€§æŒ–çŸ¿
- NFTäº¤æ˜“å¸‚åœº
- è·¨é“¾æ¡¥æ¥

**Month 7-12: ç”Ÿæ€å»ºè®¾**
- ç¬¬ä¸‰æ–¹é›†æˆ
- APIå¼€æ”¾å¹³å°
- å¼€å‘è€…å·¥å…·åŒ…
- ç¤¾åŒºæ¿€åŠ±è®¡åˆ’

---

## ä¹ã€å®‰å…¨æ€§è€ƒè™‘

### 9.1 æ™ºèƒ½åˆçº¦å®‰å…¨

```
âœ… ä½¿ç”¨OpenZeppelinæ ‡å‡†åº“
âœ… è®¿é—®æ§åˆ¶ï¼ˆAccessControlï¼‰
âœ… é‡å…¥æ”»å‡»é˜²æŠ¤ï¼ˆReentrancyGuardï¼‰
âœ… æš‚åœæœºåˆ¶ï¼ˆPausableï¼‰
âœ… å‡çº§æœºåˆ¶ï¼ˆProxy Patternï¼‰
âœ… å¤šç­¾é’±åŒ…ï¼ˆGnosis Safeï¼‰
âœ… ç¬¬ä¸‰æ–¹å®‰å…¨å®¡è®¡ï¼ˆCertiK/SlowMistï¼‰
âœ… Bug Bountyè®¡åˆ’
```

### 9.2 ç§é’¥ç®¡ç†

```
åç«¯æœåŠ¡:
- ä½¿ç”¨AWS KMS / Google Cloud KMS
- çƒ­é’±åŒ…ï¼ˆè¿è¥ï¼‰+ å†·é’±åŒ…ï¼ˆå‚¨å¤‡ï¼‰
- å¤šç­¾é’±åŒ…æ§åˆ¶å…³é”®æ“ä½œ
- è‡ªåŠ¨åŒ–è„šæœ¬æœ€å°æƒé™

ç”¨æˆ·ç«¯:
- é¼“åŠ±ä½¿ç”¨ç¡¬ä»¶é’±åŒ…
- æä¾›åŠ©è®°è¯å¤‡ä»½æŒ‡å—
- äº¤æ˜“ç­¾åå‰äºŒæ¬¡ç¡®è®¤
- å¼‚å¸¸äº¤æ˜“é¢„è­¦
```

### 9.3 æ•°æ®å®Œæ•´æ€§

```
ä¸‰å±‚éªŒè¯æœºåˆ¶:
1. æ•°æ®åº“å±‚ï¼šä¸šåŠ¡é€»è¾‘éªŒè¯
2. IPFSå±‚ï¼šContent IDè‡ªéªŒè¯
3. åŒºå—é“¾å±‚ï¼šHashå¯¹æ¯”éªŒè¯

å®šæœŸå®¡è®¡:
- æ¯æœˆæ•°æ®å®Œæ•´æ€§æ£€æŸ¥
- åŒºå—é“¾ä¸æ•°æ®åº“å¯¹è´¦
- IPFSæ•°æ®å¯ç”¨æ€§æ£€æŸ¥
```

---

## åã€åˆè§„æ€§è€ƒè™‘

### 10.1 æ³•å¾‹åˆè§„

```
âœ… ä»£å¸æ€§è´¨ï¼šåŠŸèƒ½å‹ä»£å¸ï¼ˆUtility Tokenï¼‰ï¼Œéè¯åˆ¸
âœ… ç”¨é€”è¯´æ˜ï¼šä»…ç”¨äºå¹³å°å†…æ¿€åŠ±å’ŒæœåŠ¡ï¼Œä¸æ‰¿è¯ºå›æŠ¥
âœ… åˆè§„å®¡æŸ¥ï¼šå’¨è¯¢åŒºå—é“¾æ³•å¾‹é¡¾é—®
âœ… KYC/AMLï¼šå¤§é¢äº¤æ˜“éœ€è¦èº«ä»½éªŒè¯
âœ… åœ°åŸŸé™åˆ¶ï¼šæ ¹æ®å„å›½æ³•è§„è°ƒæ•´æœåŠ¡
```

### 10.2 æ•°æ®éšç§

```
âœ… GDPRåˆè§„ï¼šå¯åˆ é™¤ä¸ªäººæ•°æ®ï¼ˆé“¾ä¸‹ï¼‰
âœ… æ•°æ®æœ€å°åŒ–ï¼šé“¾ä¸Šä»…å­˜Hash
âœ… è®¿é—®æ§åˆ¶ï¼šç»†ç²’åº¦æƒé™ç®¡ç†
âœ… åŠ å¯†å­˜å‚¨ï¼šæ•æ„Ÿæ•°æ®åŠ å¯†
âœ… ç”¨æˆ·åŒæ„ï¼šæ˜ç¡®å‘ŠçŸ¥æ•°æ®ç”¨é€”
```

---

## åä¸€ã€æˆæœ¬ä¼°ç®—

### 11.1 å¼€å‘æˆæœ¬

| é¡¹ç›® | äººåŠ› | æ—¶é—´ | æˆæœ¬ä¼°ç®— |
|------|------|------|---------|
| æ™ºèƒ½åˆçº¦å¼€å‘ | 1ä¸ªSolidityå·¥ç¨‹å¸ˆ | 2ä¸ªæœˆ | $20,000 |
| åç«¯é›†æˆ | 2ä¸ªåç«¯å·¥ç¨‹å¸ˆ | 3ä¸ªæœˆ | $45,000 |
| å‰ç«¯é›†æˆ | 1ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆ | 2ä¸ªæœˆ | $15,000 |
| å®‰å…¨å®¡è®¡ | å¤–éƒ¨å®¡è®¡å…¬å¸ | 1ä¸ªæœˆ | $30,000 |
| æµ‹è¯• | 1ä¸ªQAå·¥ç¨‹å¸ˆ | 2ä¸ªæœˆ | $10,000 |
| **æ€»è®¡** | | **6ä¸ªæœˆ** | **$120,000** |

### 11.2 è¿è¥æˆæœ¬ï¼ˆå¹´ï¼‰

| é¡¹ç›® | æ•°é‡ | å•ä»· | å¹´æˆæœ¬ |
|------|------|------|--------|
| IPFSå­˜å‚¨ï¼ˆPinata/Web3.Storageï¼‰| 1TB | $100/æœˆ | $1,200 |
| RPCèŠ‚ç‚¹ï¼ˆInfura/Alchemyï¼‰| æ— é™è¯·æ±‚ | $500/æœˆ | $6,000 |
| Gasè´¹å‚¨å¤‡ | - | - | $10,000 |
| æœåŠ¡å™¨ï¼ˆåŒºå—é“¾èŠ‚ç‚¹ï¼‰| 2å° | $200/æœˆ | $4,800 |
| ç›‘æ§å’Œå‘Šè­¦ | - | $100/æœˆ | $1,200 |
| å®‰å…¨ä¿é™© | - | - | $5,000 |
| **æ€»è®¡** | | | **$28,200** |

### 11.3 ä»£å¸ç»æµæˆæœ¬

```
åˆæœŸæµåŠ¨æ€§ï¼š$100,000 (NB-MATIC LP)
è¥é”€ç©ºæŠ•ï¼š50,000,000 NB (5%)
è¿è¥å‚¨å¤‡ï¼šæ¯æœˆé‡Šæ”¾ â‰ˆ $5,000 ç­‰å€¼NB
```

---

## åäºŒã€é£é™©ä¸æŒ‘æˆ˜

### 12.1 æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|---------|
| æ™ºèƒ½åˆçº¦æ¼æ´ | é«˜ | å¤šæ¬¡å®¡è®¡ã€Bug Bountyã€ä¿é™© |
| Gasè´¹æ³¢åŠ¨ | ä¸­ | é€‰æ‹©ä½è´¹ç”¨é“¾ï¼ˆPolygonï¼‰|
| IPFSæ•°æ®ä¸¢å¤± | ä¸­ | å¤šèŠ‚ç‚¹å¤‡ä»½ã€å†—ä½™å­˜å‚¨ |
| RPCèŠ‚ç‚¹ä¸ç¨³å®š | ä¸­ | å¤šRPCæä¾›å•†ã€è‡ªå»ºèŠ‚ç‚¹ |
| åŒºå—é“¾æ‹¥å µ | ä½ | Layer 2æ–¹æ¡ˆã€äº¤æ˜“é˜Ÿåˆ— |

### 12.2 ä¸šåŠ¡é£é™©

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|---------|
| ä»£å¸ä»·æ ¼æ³¢åŠ¨ | é«˜ | åŠŸèƒ½ä»·å€¼é”šå®šã€ç¨³å®šæœºåˆ¶ |
| ç”¨æˆ·æ¥å—åº¦ä½ | é«˜ | æ•™è‚²ã€æ¿€åŠ±ã€ç®€åŒ–æµç¨‹ |
| ç›‘ç®¡æ”¿ç­–å˜åŒ– | é«˜ | æ³•å¾‹å’¨è¯¢ã€åˆè§„ä¼˜å…ˆ |
| ç«äº‰å¯¹æ‰‹ | ä¸­ | æŠ€æœ¯å£å’ã€ç”Ÿæ€ä¼˜åŠ¿ |

---

## åä¸‰ã€æˆåŠŸæŒ‡æ ‡

### 13.1 æŠ€æœ¯æŒ‡æ ‡

```
âœ… æ™ºèƒ½åˆçº¦ Gasä¼˜åŒ–ï¼š< 100,000 gas/äº¤æ˜“
âœ… äº¤æ˜“ç¡®è®¤æ—¶é—´ï¼š< 30ç§’
âœ… IPFSæ•°æ®å¯ç”¨æ€§ï¼š> 99.9%
âœ… APIå“åº”æ—¶é—´ï¼š< 200ms
âœ… ç³»ç»Ÿå¯ç”¨æ€§ï¼š> 99.5%
```

### 13.2 ä¸šåŠ¡æŒ‡æ ‡

```
Year 1:
- é“¾ä¸Šè®¾å¤‡ï¼š10,000+
- é“¾ä¸Šä¸“å®¶è®¤è¯ï¼š500+
- NBæŒæœ‰åœ°å€ï¼š5,000+
- æ—¥å‡äº¤æ˜“ï¼š100+

Year 3:
- é“¾ä¸Šè®¾å¤‡ï¼š100,000+
- é“¾ä¸Šä¸“å®¶è®¤è¯ï¼š5,000+
- NBæŒæœ‰åœ°å€ï¼š50,000+
- æ—¥å‡äº¤æ˜“ï¼š1,000+
```

---

## åå››ã€æ€»ç»“

æœ¬æ–¹æ¡ˆè®¾è®¡äº†ä¸€ä¸ªå®Œæ•´çš„åŒºå—é“¾ç§¯åˆ†ä»£å¸ç³»ç»Ÿï¼ˆLUNA Bitcoin - NBï¼‰ï¼Œå…·å¤‡ä»¥ä¸‹æ ¸å¿ƒç‰¹ç‚¹ï¼š

### âœ… æŠ€æœ¯å¯è¡Œæ€§
- é‡‡ç”¨æˆç†Ÿçš„Polygoné“¾ï¼ˆä½è´¹ç”¨ã€é«˜æ€§èƒ½ï¼‰
- ERC-20ä»£å¸ + ERC-721 NFTç»„åˆ
- IPFS + åŒºå—é“¾æ··åˆå­˜å‚¨
- OpenZeppelinæ ‡å‡†åˆçº¦åº“

### âœ… ä¸šåŠ¡ä»·å€¼
- ä¸å¯ç¯¡æ”¹çš„è®¾å¤‡å±¥å†
- å¯éªŒè¯çš„ä¸“å®¶èµ„è´¨
- å®Œæ•´çš„ç§¯åˆ†æ¿€åŠ±ä½“ç³»
- ä»£å¸ç»æµé—­ç¯

### âœ… å¯è½åœ°æ€§
- åˆ†é˜¶æ®µå®æ–½è·¯çº¿å›¾
- æ˜ç¡®çš„æˆæœ¬é¢„ç®—
- é£é™©ç¼“è§£æªæ–½
- åˆè§„æ€§è€ƒè™‘

### âœ… æ‰©å±•æ€§
- æ”¯æŒDAOæ²»ç†
- è·¨é“¾æ¡¥æ¥å‡†å¤‡
- APIå¼€æ”¾å¹³å°
- ç¬¬ä¸‰æ–¹é›†æˆ

---

## é™„å½•

### A. æ™ºèƒ½åˆçº¦åœ°å€ï¼ˆå¾…éƒ¨ç½²ï¼‰

```
Polygon Mainnet:
- NBToken: 0x...
- DevicePassport: 0x...
- ExpertCredential: 0x...
- RewardDistributor: 0x...

Mumbai Testnet:
- NBToken: 0x...
- DevicePassport: 0x...
```

### B. ç›¸å…³èµ„æº

- Polygonå®˜ç½‘: https://polygon.technology/
- OpenZeppelin: https://openzeppelin.com/
- IPFS: https://ipfs.io/
- Ethers.js: https://docs.ethers.io/

### C. è”ç³»æ–¹å¼

- æŠ€æœ¯æ”¯æŒ: tech@lunaindustry.com
- å•†åŠ¡åˆä½œ: business@lunaindustry.com
- ç¤¾åŒºDiscord: https://discord.gg/lunaindustry

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** 1.0
**æœ€åæ›´æ–°ï¼š** 2026-02-03
**çŠ¶æ€ï¼š** å¾…å®¡æ ¸
**ä¸‹ä¸€æ­¥ï¼š** ç®¡ç†å±‚è¯„å®¡ â†’ æŠ€æœ¯å›¢é˜Ÿè¯„ä¼° â†’ è¯•ç‚¹å®æ–½

